<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RECOMMENDATION PAGE</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="https://cdn.jsdelivr.net/npm/jquery@2.1.0/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.6/dist/loadingoverlay.min.js"></script>
</head>
<body>
<div style="width: 1280px; margin: auto;">
    <h1 style="margin-top: 20px;">UOSPITAL RECOMMENDATION SYSTEM</h1>

    <div class="ui input">
      <input id="hospital_name" type="text" placeholder="병원 이름">
    </div>
    <button class="ui inverted blue button" onclick="recommendation_by_content()">click</button>
    <div id="result" style="margin-top: 20px;"></div>
</div>
</body>
<script>
    function recommendation_by_content() {
        let formData = new FormData();
        let hospital_name = document.getElementById('hospital_name').value;
        formData.append('hospital_name', hospital_name);

        $.LoadingOverlay("show", {
            text: "추천 병원을 로딩중입니다.",
            textClass: "loading_text",
        });

        $.ajax({
            type: 'POST', url: '/recommendation/content/', data: formData,
            success: function (data) {
                let error = data['error'];
                if (error == 0) {
                    $.LoadingOverlay('hide');
                    console.log(data['similar_hospitals'])
                    document.getElementById('result').innerHTML = data['similar_hospitals'];
                }
            },
            error: function (xhr, status, error) {
                alert("네트워크 오류 발생");
            },
            contentType: false,
            processData: false,
            dataType: 'json'
        });

        return
    }

</script>
</html>